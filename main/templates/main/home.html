{% extends 'index.html' %}

{% block content %}
<!-- Welcome  -->
<div class="page-header align-items-start min-vh-50 pt-5 pb-11 m-3 border-radius-lg" style="background-image: url('/static/assets/img/IMG_3734_2.PNG');">
  <span class="mask bg-gradient-light opacity-6"></span>
  <div class="container mt-5">
    <div class="jumbotron text-center">
      <h1 class="display-4">Welcome to Finko</h1>
      <p class="lead">Manage your property with ease.</p>
      <hr class="my-4">
      {% if request.user.is_authenticated %}
        <p>Hello, {{ request.user.first_name }}!</p>
        <a class="btn btn-primary btn-lg" href="{% url 'dashboard' %}" role="button">Go to Dashboard</a>
      {% else %}
        <a class="btn btn-primary btn-lg" href="{% url 'log_in' %}" role="button">Log In</a>
        <a class="btn btn-outline-secondary btn-lg" href="{% url 'register_user' %}" role="button">Register</a>
      {% endif %}
    </div>
  </div>
</div>

<!-- Choose your plan -->
<div class="container mt-5">
  <div class="jumbotron text-center">
    <h1 class="display-4">Choose Your Plan</h1>
    <p class="lead">Select the plan that best fits your property management needs.</p>
    <hr class="my-4">
  </div>
  <div class="row mt-4 justify-content-center">
    <div class="col-12">
      <div class="table-responsive">
        <table class="table table-bordered table-striped align-middle bg-white">
          <thead class="bg-gradient-info text-white text-center">
            <tr>
              <th class="text-center"></th>
              <th class="text-center">Free / Basic<br><span class="fw-normal">$0/mo</span></th>
              <th class="text-center">Standard<br><span class="fw-normal">$3.99/mo</span></th>
              <th class="text-center">Enterprise<br><span class="fw-normal">Custom Pricing</span></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="fw-bold">Properties Allowed</td>
              <td class="text-center">1</td>
              <td class="text-center">1-3</td>
              <td class="text-center">3+</td>
            </tr>
            <tr>
              <td class="fw-bold">Reports</td>
              <td class="text-center text-danger">❌</td>
              <td class="text-center text-success">✔️</td>
              <td class="text-center text-success">✔️</td>
            </tr>
            <tr>
              <td class="fw-bold">Email Notifications</td>
              <td class="text-center text-danger">❌</td>
              <td class="text-center text-success">✔️</td>
              <td class="text-center text-success">✔️</td>
            </tr>
            <tr>
              <td class="fw-bold">Maintenance Tracking</td>
              <td class="text-center text-danger">❌</td>
              <td class="text-center text-success">✔️</td>
              <td class="text-center text-success">✔️</td>
            </tr>
            <tr>
              <td class="fw-bold">Statements</td>
              <td class="text-center text-danger">❌</td>
              <td class="text-center text-danger">❌</td>
              <td class="text-center text-success">✔️</td>
            </tr>
            <tr>
              <td class="fw-bold">Ads-Free</td>
              <td class="text-center text-danger">❌</td>
              <td class="text-center text-danger">✔️</td>
              <td class="text-center text-success">✔️</td>
            </tr>
            <tr>
              <td></td>
              <td class="text-center">
                <a href="{% url 'register_user' %}" class="btn btn-outline-info w-100">Get Started</a>
              </td>
              <td class="text-center">
                <a href="{% url 'register_user' %}?plan=standard" class="btn btn-primary w-100">Choose Standard</a>
              </td>
              <td class="text-center">
                <a href="{% url 'register_user' %}" class="btn btn-dark w-100">Contact Us</a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Subscribe to Finko -->
<div class="container mt-5">
  <h2>Subscribe to Finko</h2>
  <button id="checkout-button" class="btn btn-primary">Subscribe Now</button>
  <script src="https://js.stripe.com/v3/"></script>
  <script>
    document.getElementById('checkout-button').addEventListener('click', function () {
      fetch('/create-subscription-checkout-session/')
        .then(response => response.json())
        .then(data => {
          var stripe = Stripe("{{ STRIPE_PUBLISHABLE_KEY }}");
          stripe.redirectToCheckout({ sessionId: data.id });
        });
    });
  </script>
</div>

<!-- Other sections -->
<div class="container mt-5">
  <div class="row mt-4">
    <div class="col-md-4">
      <h3>Browse Properties</h3>
      <p>Explore our listings and find the perfect place for you.</p>
      <a href="{% url 'properties' %}" class="btn btn-info">View Properties</a>
    </div>
    <div class="col-md-4">
      <h3>Contact Us</h3>
      <p>Have questions? Reach out to our team for assistance.</p>
      <a href="" class="btn btn-info">Contact</a>
    </div>
    <div class="col-md-4">
      <h3>About Rentu</h3>
      <p>Learn more about our mission and how we help you rent or list properties.</p>
      <a href="" class="btn btn-info">About Us</a>
    </div>
  </div>
</div>
{% endblock %}