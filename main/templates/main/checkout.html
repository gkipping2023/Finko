{% extends "index.html" %}
{% block content %}
<h2>Subscribe to Finko</h2>
<button id="checkout-button" class="btn btn-primary">Subscribe Now</button>

<script src="https://js.stripe.com/v3/"></script>
<script>
document.getElementById('checkout-button').addEventListener('click', function () {
    fetch('/create-subscription-checkout-session/')
        .then(response => response.json())
        .then(data => {
            var stripe = Stripe("{{ STRIPE_PUBLISHABLE_KEY }}");
            stripe.redirectToCheckout({ sessionId: data.id });
        });
});
</script>
{% endblock %}